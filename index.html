<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Complete all</title>

  <!-- Poppins font (matches design) -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f6f7f8;
      --card:#ffffff;
      --text:#333;
      --muted:#8b8b8b;
      --green-1:#07d36b;
      --green-2:#03b45a;
      --shadow-low:rgba(0,0,0,0.08);
      --shadow-high:rgba(0,0,0,0.18);
      --radius:14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      color:var(--text);
    }

    /* Card */
    .card{
      width:min(900px,96%);
      background:var(--card);
      border-radius:22px;
      padding:48px 56px;
      box-shadow: 0 18px 50px var(--shadow-low);
    }

    .header{
      text-align:center;
      margin-bottom:34px;
    }
    .title{
      font-size:48px;
      margin:0 0 8px;
      font-weight:700;
      letter-spacing:0.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size:18px;
      font-weight:500;
    }

    /* Buttons list */
    .buttons{
      display:flex;
      flex-direction:column;
      gap:20px;
      margin:32px 0;
    }

    .action{
      --h:74px; /* button height */
      height:var(--h);
      border-radius:14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 26px;
      cursor:pointer;
      user-select:none;
      color:#fff;
      font-weight:700;
      font-size:22px;
      position:relative;
      overflow:visible;
      transition:transform .18s ease, box-shadow .18s ease;
    }

    /* 3D-stacked look: colored face + offset darker shadow layer */
    .action::after{
      content:"";
      position:absolute;
      left:8px; right:8px; bottom:-12px; height:18px;
      border-radius:12px;
      z-index:-2;
      filter:blur(0.5px);
    }
    .action::before{
      content:"";
      position:absolute;
      left:8px; right:8px; bottom:-22px; height:18px;
      border-radius:12px;
      z-index:-3;
      filter:blur(0px);
    }

    .action.green{
      background:linear-gradient(180deg,var(--green-1),var(--green-2));
      box-shadow: 0 12px 0 rgba(2,120,70,0.25), 0 18px 40px var(--shadow-high);
    }
    .action.green::after{ background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(0,0,0,0.08)); transform: translateY(6px); }
    .action.green::before{ background: rgba(0,0,0,0.06); transform: translateY(14px); }

    /* Left icon circle */
    .left{
      display:flex;
      align-items:center;
      gap:18px;
    }
    .icon-circle{
      width:48px;
      height:48px;
      border-radius:50%;
      background:rgba(255,255,255,0.12);
      display:flex;
      align-items:center;
      justify-content:center;
      flex-shrink:0;
      margin-right:6px;
    }
    .icon-circle svg{ width:22px; height:22px; fill:rgba(255,255,255,0.95) }

    .text{
      /* main text centered-left */
      text-align:left;
      display:block;
    }
    .subtext{
      font-size:14px;
      opacity:0.95;
      display:block;
    }

    /* Right chevron */
    .chev{
      width:46px;
      height:46px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:10px;
      opacity:0.95;
    }
    .chev svg{ width:18px; height:18px; fill:rgba(255,255,255,0.95) }

    /* Completed state */
    .action.done{
      opacity:0.85;
      transform:translateY(2px);
      pointer-events:none;
      filter:saturate(0.95);
    }

    /* Progress area */
    .progress-wrap{
      margin-top:6px;
      text-align:center;
    }
    .progress-label{
      font-weight:600;
      color:#666;
      font-size:20px;
      margin-bottom:12px;
    }
    .progress-bar{
      width:100%;
      height:14px;
      background:linear-gradient(180deg,#efefef,#f1f1f1);
      border-radius:12px;
      overflow:hidden;
      box-shadow: inset 0 1px rgba(255,255,255,0.6);
    }
    .progress-fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg,#18d36f,#07b25a);
      background-size:200% 100%;
      transition:width .32s ease;
      position:relative;
      /* diagonal stripes overlay */
    }
    .progress-fill::before{
      content:"";
      position:absolute;
      inset:0;
      background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.12) 0 12px, rgba(255,255,255,0.02) 12px 24px);
      mix-blend-mode:overlay;
      pointer-events:none;
    }

    /* Final button */
    .final{
      margin-top:26px;
      height:72px;
      border-radius:14px;
      font-size:20px;
      font-weight:700;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 26px;
      color:#fff;
      cursor:pointer;
      background:linear-gradient(180deg,var(--green-1),var(--green-2));
      box-shadow: 0 12px 0 rgba(2,120,70,0.25), 0 18px 40px var(--shadow-high);
      transition:opacity .18s ease, transform .18s ease;
    }
    .final.disabled{
      background:linear-gradient(180deg,#d9d9d9,#c2c2c2);
      box-shadow:none;
      opacity:0.6;
      cursor:not-allowed;
    }
    .final .left{gap:12px}
    .final .lock{ width:34px; height:34px; display:flex; align-items:center; justify-content:center; border-radius:6px; background:rgba(255,255,255,0.12) }

    /* Responsive */
    @media (max-width:640px){
      .card{padding:28px 20px}
      .title{font-size:34px}
      .action{height:64px; font-size:18px}
      .chev{width:40px;height:40px}
      .icon-circle{width:42px;height:42px}
      .final{height:64px; font-size:18px}
    }
  </style>
</head>
<body>

  <div class="card" role="main" aria-labelledby="pageTitle">
    <div class="header">
      <h1 id="pageTitle" class="title">Complete all</h1>
      <p class="subtitle">See an ad â†’ return here until all is complete!</p>
    </div>

    <div class="buttons" aria-hidden="false">
      <button class="action green" data-index="0" id="btn-0" aria-label="Task 1">
        <div class="left">
          <div class="icon-circle" aria-hidden="true">
            <!-- swirl icon -->
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C7.6 2 4 5.6 4 10s3.6 8 8 8 8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6V4c-4 0-8 3.6-8 8s4 8 8 8 8-3.6 8-8S16.4 2 12 2z"/></svg>
          </div>
          <div class="text">
            <span class="subtext">Click, wait 10s, then return</span>
          </div>
        </div>
        <div class="chev" aria-hidden="true">
          <!-- chevron -->
          <svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
        </div>
      </button>

      <button class="action green" data-index="1" id="btn-1" aria-label="Task 2">
        <div class="left">
          <div class="icon-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C7.6 2 4 5.6 4 10s3.6 8 8 8 8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6V4c-4 0-8 3.6-8 8s4 8 8 8 8-3.6 8-8S16.4 2 12 2z"/></svg>
          </div>
          <div class="text">
            <span class="subtext">Click, wait 10s, then return</span>
          </div>
        </div>
        <div class="chev" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
        </div>
      </button>

      <button class="action green" data-index="2" id="btn-2" aria-label="Task 3">
        <div class="left">
          <div class="icon-circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C7.6 2 4 5.6 4 10s3.6 8 8 8 8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6V4c-4 0-8 3.6-8 8s4 8 8 8 8-3.6 8-8S16.4 2 12 2z"/></svg>
          </div>
          <div class="text">
            <span class="subtext">Click, wait 10s, then return</span>
          </div>
        </div>
        <div class="chev" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
        </div>
      </button>
    </div>

    <div class="progress-wrap" aria-live="polite">
      <div class="progress-label">Unlock Progress <span id="progress-text">0/3</span></div>
      <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div id="progress-fill" class="progress-fill" style="width:0%"></div>
      </div>
    </div>

    <button id="finalBtn" class="final disabled" aria-disabled="true" style="pointer-events:none;">
      <div class="left">
        <div class="lock" aria-hidden="true">
          <!-- lock icon -->
          <svg viewBox="0 0 24 24" width="18" height="18" fill="#fff"><path d="M12 17a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm6-7h-1V8a5 5 0 0 0-10 0v2H6a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2zM9 8a3 3 0 0 1 6 0v2H9V8z"/></svg>
        </div>
        <div class="text" style="color:#fff">Click here once finished to get all videos</div>
      </div>
      <div class="chev" aria-hidden="true">
        <svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
      </div>
    </button>
  </div>

  <script>
    // Links for buttons (kept as placeholders for count)
    const LINKS = [
      'https://omg10.com/4/9150458',
      'https://dressingcomplete.com/hq15mh6nqw?key=c86f18b3dbc35f9b75e5a3fa6dda0f19',
      'https://omg10.com/4/9150458'
    ];
    const FINAL_LINK = 'https://omg10.com/4/9150460';

    // RANDOM POOL: each click will open one random URL from this pool
    const RANDOM_POOL = [
      'https://dressingcomplete.com/d7ymnqvu?key=31358571b4853e082afeead736e71fc5',
      'https://dressingcomplete.com/hq15mh6nqw?key=c86f18b3dbc35f9b75e5a3fa6dda0f19',
      'https://omg10.com/4/9179708',
      'https://omg10.com/4/9302818',
      'https://omg10.com/4/9150458',
      'https://omg10.com/4/9150458'
    ];

    // --- openInChrome (best-effort) ---
    function isAndroid(){ return /Android/i.test(navigator.userAgent); }
    function isIOS(){ return /iPhone|iPad|iPod/i.test(navigator.userAgent); }

    function openInChrome(url, fallbackOpen = (u)=>window.open(u, '_blank', 'noopener')) {
      try {
        if (isAndroid()) {
          const noProto = url.replace(/^https?:\/\//, '');
          const intentUrl = 'intent://' + noProto + '#Intent;scheme=https;package=com.android.chrome;end';
          // Navigate to intent URL (should open Chrome)
          window.location = intentUrl;
          setTimeout(()=> {
            if (document.visibilityState !== 'hidden') {
              // If still visible, fallback
              fallbackOpen(url);
            }
          }, 900);
          return;
        }

        if (isIOS()) {
          const scheme1 = url.replace(/^https?:\/\//, 'googlechromes://');
          const scheme2 = url.replace(/^https?:\/\//, 'googlechrome://');
          // try scheme1 then scheme2 with iframe fallback
          const iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          let tried = false;

          const tryScheme = (scheme, cb) => {
            tried = true;
            iframe.src = scheme;
            document.body.appendChild(iframe);
            setTimeout(()=>{
              if (document.visibilityState !== 'hidden') {
                cb();
              }
              try { document.body.removeChild(iframe); } catch(e){}
            }, 900);
          };

          tryScheme(scheme1, ()=> {
            tryScheme(scheme2, ()=> {
              fallbackOpen(url);
            });
          });
          return;
        }

        // Desktop / unknown
        fallbackOpen(url);
      } catch (err) {
        console.warn('openInChrome error, fallback to normal open', err);
        fallbackOpen(url);
      }
    }

    // --- UI logic (buttons, progress) ---
    const total = LINKS.length;
    const states = new Array(total).fill(false);
    const buttons = LINKS.map((_,i)=>document.getElementById('btn-'+i));
    const progressText = document.getElementById('progress-text');
    const progressFill = document.getElementById('progress-fill');
    const finalBtn = document.getElementById('finalBtn');

    buttons.forEach((btn, idx) => {
      btn.addEventListener('click', (e) => {
        if (states[idx]) return;
        // pick a random URL from RANDOM_POOL each click
        const randomUrl = RANDOM_POOL[Math.floor(Math.random() * RANDOM_POOL.length)];
        // Use openInChrome (must be called from this click handler to satisfy user gesture)
        openInChrome(randomUrl, (u)=> window.open(u, '_blank', 'noopener'));
        startCountdown(btn, idx, 10);
      });
    });

    function startCountdown(button, idx, seconds){
      const textEl = button.querySelector('.subtext');
      let t = seconds;
      button.classList.add('doing');
      button.disabled = true;
      button.style.pointerEvents = 'none';
      textEl.textContent = `Waiting... ${t}s`;
      const timer = setInterval(() => {
        t -= 1;
        if (t > 0) {
          textEl.textContent = `Waiting... ${t}s`;
        } else {
          clearInterval(timer);
          states[idx] = true;
          button.classList.add('done');
          textEl.textContent = 'âœ“ Completed!';
          button.style.pointerEvents = 'none';
          updateProgress();
        }
      }, 1000);
    }

    function updateProgress(){
      const done = states.filter(Boolean).length;
      progressText.textContent = done + '/' + total;
      const pct = Math.round((done/total)*100);
      progressFill.style.width = pct + '%';
      progressFill.parentElement.setAttribute('aria-valuenow', pct);

      if (done === total) {
        finalBtn.classList.remove('disabled');
        finalBtn.style.pointerEvents = '';
        finalBtn.setAttribute('aria-disabled','false');
        finalBtn.querySelector('.text').textContent = 'ðŸŽ‰ Click here to get all videos!';
        finalBtn.addEventListener('click', () => {
          // final click also opens a random link from the same pool (or you can keep FINAL_LINK)
          // if you prefer final to always go to FINAL_LINK, replace random choice with FINAL_LINK
          const randomFinal = RANDOM_POOL[Math.floor(Math.random() * RANDOM_POOL.length)];
          openInChrome(randomFinal, (u)=> window.open(u, '_blank', 'noopener'));
        }, { once:true });
      }
    }

    // Prevent click when disabled
    finalBtn.addEventListener('click', (e)=>{
      if (finalBtn.classList.contains('disabled')) e.preventDefault();
    });

    // Keyboard accessibility: Enter/Space triggers
    buttons.forEach(btn=>{
      btn.addEventListener('keyup', (e)=>{
        if (e.key === 'Enter' || e.key === ' ') btn.click();
      });
    });
  </script>
</body>
</html>
